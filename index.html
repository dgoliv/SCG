<!DOCTYPE html>
<html>
<head>
  <title>Lista de Tarefas</title>
  <style>
    .container {
      margin: 20px auto;
      width: 300px;
    }

    input[type="text"], select {
      display: block;
      margin-bottom: 10px;
      width: 100%;
    }

    button {
      display: block;
      margin-bottom: 10px;
    }

    ul {
      list-style-type: none;
      padding: 0;
    }

    li {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Cadastro de Tarefas</h2>
    <input type="text" id="tituloInput" placeholder="Cadastro de Título">
    <button id="adicionarTitulo">Adicionar</button>

    <select id="listaTitulos"></select>

    <input type="date" id="dataInput" placeholder="Data">

    <input type="text" id="descricaoInput" placeholder="Descrição">
    <button id="adicionarTarefa">Adicionar</button>

    <h2>Lista de Tarefas</h2>
    <ul id="listaTarefas"></ul>
  </div>

  <script>
    const adicionarTituloBtn = document.getElementById('adicionarTitulo');
    const listaTitulos = document.getElementById('listaTitulos');
    const adicionarTarefaBtn = document.getElementById('adicionarTarefa');
    const listaTarefas = document.getElementById('listaTarefas');

    // Verifica se há dados no localStorage e carrega os títulos e tarefas salvos
    const titulosSalvos = localStorage.getItem('titulos');
    if (titulosSalvos) {
      listaTitulos.innerHTML = titulosSalvos;
    }

    const tarefasSalvas = localStorage.getItem('tarefas');
    if (tarefasSalvas) {
      listaTarefas.innerHTML = tarefasSalvas;
    }

    adicionarTituloBtn.addEventListener('click', adicionarTitulo);
    adicionarTarefaBtn.addEventListener('click', adicionarTarefa);

    function adicionarTitulo() {
      const tituloInput = document.getElementById('tituloInput');
      const titulo = tituloInput.value;

      if (titulo !== '') {
        const option = document.createElement('option');
        option.text = titulo;
        listaTitulos.add(option);

        tituloInput.value = '';

        // Salva os títulos no localStorage
        localStorage.setItem('titulos', listaTitulos.innerHTML);
      }
    }

    function adicionarTarefa() {
      const tituloSelecionado = listaTitulos.value;
      const dataInput = document.getElementById('dataInput');
      const descricaoInput = document.getElementById('descricaoInput');

      if (tituloSelecionado !== '') {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${tituloSelecionado}</strong> - ${dataInput.value} - ${descricaoInput.value}`;

        listaTarefas.appendChild(li);

        dataInput.value = '';
        descricaoInput.value = '';

        // Salva as tarefas no localStorage
        localStorage.setItem('tarefas', listaTarefas.innerHTML);
      }
    }
  </script>
</body>
</html>
